name: Block Private IPs
on: [push, pull_request]
jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Grep for private LAN IPs
        run: |
          if grep -RInE '(^|[^0-9])((10\.[0-9]{1,3}\.)|(192\.168\.)|(172\.(1[6-9]|2[0-9]|3[0-1])\.))' -- . ; then
            echo "Private IPs found. Use HOST_IP/CC_HOST/VC_RESOLVER_BASE_URL instead."
            exit 1
          fi
